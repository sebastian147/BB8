/**
 	\file FW_Systick.c
 	\brief Drivers del systick
 	\details Barrido de teclas y envio de mensajes al LCD
 	\author Pablo Irrera Condines
 	\date 2017.06.22
*/

#include "FW_Systick.h"
#include "DR_teclado.h"

uint8_t g_flag = 0;

void Systick_Init(uint32_t useg)
{
	uint32_t value;

	value = useg * 100 - 1;

	STRELOAD = value;
	STCURR = 0;
	STCTRL = 0x00000007;
}

void SysTick_Handler(void)
{
	static uint32_t count = 5;
	if(g_flag == 1)
	{
		if(count != 0)
		{
			count--;
			if(count == 0)
			{
				count=5;
				g_flag=0;
			}
		}
	}
	DR_Antirebote();
}

